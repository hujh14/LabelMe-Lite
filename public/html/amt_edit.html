<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Amazon Mechanical Turk Edit Interface">
    <meta name="author" content="Jeffrey Hu">
    <title>LabelMeLite</title>

    <!-- JQuery -->
    <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <!-- Icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/foundation-icons.min.css" integrity="sha256-Q9c+RVayp4Y4gEKE3jaABDEwnMlDf6cFEWEQSzFaOB8=" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Fancytree -->
    <link href="components/fancytree/skin-bootstrap/ui.fancytree.css" rel="stylesheet">
    <script src="components/fancytree/jquery.fancytree-all.min.js"></script>

    <!-- Custom CSS -->
    <link href="stylesheets/labelmelite.css" rel="stylesheet">
    <link href="stylesheets/buttons.css" rel="stylesheet">
    <link href="stylesheets/instructions.css" rel="stylesheet">
    <link href="stylesheets/holders.css" rel="stylesheet">
    <link href="stylesheets/amt_edit.css" rel="stylesheet">

</head>
<body>

    <div id="questionDiv">
        <div>
            <button type="button" class="btn btn-primary btn-sm" onclick="toggleInstruction(); ">Instructions</button>
            <span>Please annotate <b id="category">category</b>.</span>
            <button type="button" class="btn btn-primary btn-sm" id="submitButton" onclick="return submit()" disabled>Submit (? images left)</button>
        </div>
        <div id="definitionDiv">
            <b>Definition: </b><span id="definition">Loading...</span>
        </div>
        <div id="trainingDiv" style="display: none"></div>
    </div>

    <div id="instructionDiv">
        <h3>Task</h3>
        <ul>
            <p>For each of the <b id="imageCount" style="color: #00F;">N</b> images, refine the annotation such that it becomes a <b style="color: #0B0;">near perfect</b> segmentation of the object. A <b style="color: #0B0;">near perfect</b> annotation covers the entirety of the object and is only wrong along the boundary by a few pixels. </p>

            <p>More precisely, a <b style="color: #0B0;">near perfect</b> annotation has <b style="color: #00F;">IoU > 0.8</b> with the ground truth. IoU or Intersection over Union is defined below. We will use this criteria to judge your accuracy. </p>
            <img src="https://www.pyimagesearch.com/wp-content/uploads/2016/09/iou_equation.png" height="200">
        </ul>

        <h3>Examples</h3>

        <div id="exampleDiv">
            <div>
                <div id="exampleYes0" class="holderDiv focus0"><p>No</p><p>Yes</p><b>IoU=0.000</b><canvas></canvas></div>
                <div id="exampleNo0" class="holderDiv focus0"><p>No</p><p>Yes</p><b>IoU=0.000</b><canvas></canvas></div>
            </div>
            <div>
                <div id="exampleYes1" class="holderDiv focus0"><p>No</p><p>Yes</p><b>IoU=0.000</b><canvas></canvas></div>
                <div id="exampleNo1" class="holderDiv focus0"><p>No</p><p>Yes</p><b>IoU=0.000</b><canvas></canvas></div>
            </div>
            <div>
                <div id="exampleYes2" class="holderDiv focus0"><p>No</p><p>Yes</p><b>IoU=0.000</b><canvas></canvas></div>
                <div id="exampleNo2" class="holderDiv focus0"><p>No</p><p>Yes</p><b>IoU=0.000</b><canvas></canvas></div>
            </div>
        </div>


        <h3>Usage</h3>
        <ul>
            <li>Keep the right arrow [&rarr;] key pressed down to move continuously from an image to the next. Release the key when you see an image for which the answer should be YES.</li>
            <li>Use [space] key to toggle the answer to YES. The default answer is NO.</li>
            <li>Use the left arrow [&larr;] key to go back to the previously seen images, if you skipped an image accidentaly.</li>
        </ul>
        <h3>Submit</h3>
        <ul>
            <li>After you answer all the images, the [submit] button will be enabled.</li>
            <li><b style="color: #00F;">If your accuracy is too low, it won't allow you to submit. You will have to improve your answers first.</b></li>
        </ul>   

        <p style="font-size: 8pt; color: #999;">By making judgments about these images, you are participating in a study being performed by XXX. If you have questions about this research, please contact XXX at XXX. Your participation in this research is voluntary. You may decline further participation, at any time, without adverse consequences. Your anonymity is assured; the researchers who have requested your participation will not receive any personal information about you.</p>
    </div>

  <!-- Edit Tool -->
  <div id="toolDiv">
    <nav class="navbar">
      <a class="navbar-brand" href="/">LabelMe</a>
      <!-- Top left buttons -->
      <div id="viewButtons">
        <button type="button" class="btn toolBtn toolBtn-small" id="decreaseBrightness">
          <i class="fa material-icons">brightness_low</i>
        </button>
        <button type="button" class="btn toolBtn toolBtn-small" id="increaseBrightness">
          <i class="fa material-icons">brightness_4</i>
        </button>
        <div class="btn btn-slider">
          <input type="range" min="3" max="15" step="0.5" id="toolSlider">
        </div>
      </div>

      <!-- Top right buttons -->
      <div id="navButtons">
        <button type="button" class="btn toolBtn toolBtn-small" id="undo"><i class="fa material-icons">undo</i></button>
        <button type="button" class="btn toolBtn toolBtn-small" id="redo"><i class="fa material-icons">redo</i></button>
      </div>
    </nav>
    
    <canvas id="toolCanvas" resize></canvas>

    <div id="rightbar" class="sidebar">
      <div class="panel-heading">
        <h3 class="panel-title">Annotations</h3>
      </div>
      <div class="panel-body">
        <div id="tree" class="panel-body fancytree-fade-expander"></div> 
      </div>
    </div>

    <div id="bottombar" class="sidebar">
      <div class="center">
        <button type="button" class="btn toolBtn toolBtn-medium" id="zoomIn"><i class="fa fa-search-plus"></i></i></button>
        <button type="button" class="btn toolBtn toolBtn-medium" id="zoomOut"><i class="fa fa-search-minus"></i></button>
        <button type="button" class="btn toolBtn toolBtn-medium" id="focus"><i class="fa fi-arrows-out"></i></button>
        <button type="button" class="btn toolBtn toolBtn-medium" id="hide"><i class="fa fa-eye-slash"></i></button>
      </div>
    </div>
  </div>


  <div id="yesnoDiv">
      <div id="holderDiv-2" class="holderDiv focus2"><p>No</p><p>Yes</p><canvas></canvas></div>
      <div id="holderDiv-1" class="holderDiv focus1"><p>No</p><p>Yes</p><b></b><canvas></canvas></div>
      <div id="holderDiv0" class="holderDiv focus"><p>No</p><p>Yes</p><b></b><canvas></canvas></div> 
      <div id="holderDiv1" class="holderDiv focus1"><p>No</p><p>Yes</p><b></b><canvas></canvas></div>
      <div id="holderDiv2" class="holderDiv focus2"><p>No</p><p>Yes</p><canvas></canvas></div>
  </div>
  
  <!-- Fancy tools 
  <script type="text/javascript" src="components/numjs/dist/numjs.min.js"></script>
  <script type="text/javascript" src="components/google-closure-library-compiler/compiled.js"></script>-->

  <!-- Util Javascripts -->
  <script type="text/javascript" src="javascripts/utils/coco.js"></script>
  <script type="text/javascript" src="javascripts/utils/opencv.js"></script>
  <script type="text/javascript" src="javascripts/utils/opencv_utils.js"></script>
  <script type="text/javascript" src="javascripts/utils/rle.js"></script>
  <script type="text/javascript" src="javascripts/utils/endpoints.js"></script>
  
  <!-- Tool Javascripts -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.12.0/paper-full.min.js"></script>
  <script type="text/paperscript" src="javascripts/tool/selectTool.js" canvas="toolCanvas"></script>
  <script type="text/paperscript" src="javascripts/tool/brushTool.js" canvas="toolCanvas"></script>
  <script type="text/paperscript" src="javascripts/tool/editTool.js" canvas="toolCanvas"></script>
  <script type="text/paperscript" src="javascripts/tool/newTool.js" canvas="toolCanvas"></script>
  <script type="text/paperscript" src="javascripts/tool/annotations.js" canvas="toolCanvas"></script>
  <script type="text/paperscript" src="javascripts/tool/background.js" canvas="toolCanvas"></script>
  <script type="text/paperscript" src="javascripts/tool/tree.js" canvas="toolCanvas"></script>
  <script type="text/paperscript" src="javascripts/tool/keys.js" canvas="toolCanvas"></script>

  <!-- Main Javascripts -->
  <script type="text/javascript" src="javascripts/amt/holders.js"></script>
  <script type="text/javascript" src="javascripts/amt/edit_tool.js"></script>
  <script type="text/javascript" src="javascripts/amt/edit_tool_buttons.js"></script>
  <script type="text/javascript" src="javascripts/amt/evaluation.js"></script>
  <script type="text/javascript" src="javascripts/amt/instructions.js"></script>
  <script type="text/javascript" src="javascripts/amt/main_edit.js"></script>

</body>

</html>